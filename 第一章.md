# Redis 第一章 

### Redis 数据结构

Redis 有5种数据结构分别为 STRING(字符串) LIST(列表) SET(集合) HASH(散列) ZSET(有序集合)  




![5种结构](images/5种结构.jpg)  

#### STRING  

GET 获取存储在给定键中的值  
SET 设置存储在给定键中的值  
DEL 删除存储在给定键中的值 (这个命令可用于所有类型)  



```shell
127.0.0.1:6379> set hello world
OK
127.0.0.1:6379> get hello
"world"
127.0.0.1:6379> del hello
(integer) 1
127.0.0.1:6379> get hello
(nil)
```

#### LIST  

PRUSH 将给定值推入列表的右端  
LRANGE 获取列表在给定范围上的所有值  
LINDEX 获取列表在给定位置上的单个元素  
LPOP 从列表的左端弹出一个值, 并返回被弹出的值  

```shell
127.0.0.1:6379> rpush list-key item
(integer) 1
127.0.0.1:6379> rpush list-key item2
(integer) 2
127.0.0.1:6379> rpush list-key item
(integer) 3
127.0.0.1:6379> lrange list-key 0 -1
1) "item"
2) "item2"
3) "item"
127.0.0.1:6379> lindex list-key 2
"item"
127.0.0.1:6379> lindex list-key 1
"item2"
```

#### SET  

存储的字符串不是相同的  
但是是无序的  

SADD 添加到集合  
SREM 从集合中去除  
smembers
SMEMBERS 获取所有元素(如果元素很多会很慢)  
SISMEMBER 快速检测一个元素是否存在集合中

```shell
127.0.0.1:6379> sadd set-key item
(integer) 1
127.0.0.1:6379> sadd set-key item2
(integer) 1
127.0.0.1:6379> sadd set-key item3
(integer) 1
127.0.0.1:6379> sadd set-key item
(integer) 0
127.0.0.1:6379> smembers set-key
1) "item3"
2) "item2"
3) "item"
127.0.0.1:6379> sismember set-key item
(integer) 1
127.0.0.1:6379> srem set-key item
(integer) 1
127.0.0.1:6379> sismember set-key item
(integer) 0

```

#### 散列

存储多个键值对之间的映射  
存储的值即可以是字符串又可以是数字值  

HSET 添加
HGET 获取
HGETALL 获取所有  

```shell
127.0.0.1:6379> hset hash-key sub-key1 value1
(integer) 1
127.0.0.1:6379> hset hash-key sub-key2 value2
(integer) 1
127.0.0.1:6379> hset hash-key sub-key1 value1
(integer) 0
127.0.0.1:6379> hgetall hash-key
1) "sub-key1"
2) "value1"
3) "sub-key2"
4) "value2"
127.0.0.1:6379> hdel hash-key sub-key2
(integer) 1
127.0.0.1:6379> hgetall hash-key
1) "sub-key1"
2) "value1"
127.0.0.1:6379> hget hash-key sub-key1
"value1"
```

#### ZSET  

有序集合和散列一样 都用于存储键值对  
有序集合的键被称为成员 (member)  
每个成员都是各不相同的  
而有序集合的值则被称为分值 (score) 分值必须为浮点数 
可以根据分值以及分值的排列顺序来访问元素的结构  

ZADD 添加 
ZRANGE 获取元素 指定位置  
ZRANGEBYSCORE 指定分值条件获取元素  
ZREM 删除

```shell
127.0.0.1:6379> zadd zset-key 728 member1
(integer) 1
127.0.0.1:6379> zadd zset-key 982 member0
(integer) 1
127.0.0.1:6379> zadd zset-key 982 member0
(integer) 0
127.0.0.1:6379> zrange zset-key 0 -1 withscores
1) "member1"
2) "728"
3) "member0"
4) "982"
# 根据分值条件获取
127.0.0.1:6379> zrangebyscore zset-key 0 800 withscores
1) "member1"
2) "728"

# 删除
127.0.0.1:6379> zrem zset-key member1
(integer) 1
``` 






